<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <a href="./../subsistemas/historialmedico.html">[Historial Medico]</a>
    <h1>Diseño de la base de datos del subsistema</h1>
    <img src="./../images/diseñoBDD.png" alt="" width="600">

    <h2>Normalización de la Base de Datos</h2>
    <p>La normalización es un proceso que organiza los datos en una
        base de datos para reducir la redundancia y mejorar la integridad.
        Las primeras tres formas normales son fundamentales para lograr esto.

        
            <ul>Primera Forma Normal (1NF)</ul>
        <ol>
        <ul>
            <li>
                Definición:
                Una tabla está en 1NF si todos los atributos contienen
                    valores atómicos, es decir, no se permiten conjuntos de valores o
                    listas, y cada columna debe contener un solo valor.
            </li>
            <li>Ejemplo en la Tabla Veterinarios:
                Cada veterinario tiene un único Nombre, Telefono y Email.
                No se permiten múltiples teléfonos o correos en una sola fila.
            </li>
        </ul>
        </ol>

            <ul>Segunda Forma Normal (2NF)</ul>
        <ol>
        <ul>
            <li>
                Definición: Una tabla está en 2NF si está en 1NF y todos los atributos
                no clave dependen completamente de la clave primaria. Esto significa
                que no deben existir dependencias parciales.
            </li>
            <li>Ejemplo en la Tabla Diagnosticos:
                La clave primaria es Id_Diagnostico, y todos los demás campos (Id_Porcinos,
                Id_Veterinario, Enfermedad, FechaDiagnostico) dependen completamente de esta
                clave.
            </li>
            <li>
                Si tuviéramos un campo que dependiera solo de Id_Porcinos o Id_Veterinario,
                eso violaría 2NF.
            </li>
        </ul>
        </ol>

        <ul>Tercera Forma Normal (3NF)</ul>
        <ol>    
        <ul>
            <li>
                Definición: Una tabla está en 3NF si está en 2NF y todos los atributos no
                clave son mutuamente independientes, es decir, no hay dependencias transitivas.
            </li>
            <li>Ejemplo en la Tabla HistorialMedico:
                La clave primaria es Id_HistorialMedico, y todos los demás campos (Id_Diagnostico,
                Tratamiento, PeriodoTratamiento, GastoConsulta, GastoMedicamento) dependen solo de
                esta clave.
            </li>
            <li>
            No debe haber un campo que dependa de otro campo no clave, como un campo que dependa
             de Tratamiento para determinar el GastoConsulta.
            </li>
        </ul>
        </ol>
    </p>


    <h1>Pertenencia en la arquitectura de la base de datos</h1>

    <h2>Tabla Porcinos</h2>
    <p>
        Esta tabla almacena información sobre todos los porcinos, independientemente de su estado de salud.
        Esto es fundamental para la gestión de la granja, el seguimiento de la producción y la
        salud y, el manejo financiero.
    </p>
    <h3>Campos de la tabla</h3>
    <ul>
        <li>
            Id_Porcinos es crucial como identificador único, ya que permite gestionar y referenciar a
            cada porcino de manera efectiva.
        </li>
        <li>
            FechaIngreso es fundamental para rastrear el tiempo que un porcino ha estado en la granja,
            lo que impacta en la planificación de su manejo y producción.
        </li>
        <li>
            Peso es vital para evaluar la salud y el crecimiento del porcino, lo que influye en
            decisiones sobre alimentación y manejo.
        </li>
        <li>
            PrecioCompra y PrecioVenta son esenciales para la gestión financiera, ya que permiten
            calcular la rentabilidad del negocio y asegurar que se mantengan márgenes de beneficio adecuados.
        </li>
    </ul>

    <h2>Tabla Vacunas</h2>
    <p>
        Registra las vacunas administradas a los porcinos, lo que es esencial para el control de
        enfermedades y la salud general de los animales. La vacunación es un componente clave en la
        prevención de enfermedades.
    </p>
    
    <ul>
        <h3>
            Campos de la tabla
        </h3>
        <li>
            Id_Vacunas es esencial como identificador único para cada registro de vacunación,
            permitiendo una gestión efectiva de las vacunas administradas.
        </li>
        <li>
            NombreVacuna es importante porque identifica el tipo de vacuna administrada, lo que
            es fundamental para garantizar que los porcinos reciban la inmunización adecuada
            contra enfermedades específicas.
        </li>
        <li>
            FechaVacunacion es vital para registrar el momento de la vacunación, lo que ayuda 
            a programar futuras dosis y a mantener un control sobre el estado de salud del porcino.
        </li>
        <h3>Relación con la tabla Porcinos</h3>
        <li>
            Id_Porcinos es crucial, ya que vincula cada vacunación a un porcino específico,
            lo que facilita el seguimiento del historial de salud y vacunación de cada animal.
        </li>
    </ul>

    <h2>Tabla Diagnosticos</h2>
    <p>
        Registra los diagnósticos realizados a los porcinos, lo que es fundamental para el seguimiento
        de la salud animal y la administración de tratamientos. Esta tabla permite identificar
        problemas de salud y su evolución.
    </p>
    <ul>
        <h3>
            Campos de la tabla
        </h3>
        <li>
            Id_Diagnostico es crucial como identificador único para cada diagnóstico, lo que permite
            un seguimiento eficiente de los registros médicos.
        </li>
        <li>
            Enfermedad es vital para documentar el problema de salud identificado, permitiendo el análisis
             de patrones de enfermedades y la planificación de tratamientos.
        </li>
        <li>
            FechaVacunacion es vital para registrar el momento de la vacunación, lo que ayuda
            a programar futuras dosis y a mantener un control sobre el estado de salud del porcino.
        </li>
        <li>
            FechaDiagnostico es fundamental para registrar el momento en que se realizó el diagnóstico, lo que
            es crucial para el seguimiento de la evolución de la enfermedad y la efectividad de los tratamientos.
        </li>
        <h3>Relación con la tabla Porcinos y Veterinario</h3>
        <li>
            Id_Porcinos es esencial para vincular cada diagnóstico a un porcino específico, facilitando
            el acceso al historial de salud de cada animal.
        </li>
        <li>
            Id_Veterinario es importante para identificar al profesional que realizó el diagnóstico,
            lo que ayuda a mantener la responsabilidad y la trazabilidad de la atención médica.
        </li>
    </ul>

    <h2>Tabla veterinario</h2>
    <p>
        Esta tabla almacena información vital sobre los veterinarios que atienden a los porcinos.
        Es esencial para rastrear quién realiza diagnósticos y tratamientos, lo que es crucial para
        la rendición de cuentas y la gestión de la atención médica.
        </p>

        <ul>
            <h3>
                Campos de la tabla
            </h3>
            <li>
                Id_Veterinario es esencial como identificador único para cada veterinario, lo que permite
                gestionar su información de manera eficiente y asegurar que cada registro sea distintivo.
            </li>
            <li>
                Los campos Nombre, Telefono, y Email son igualmente importantes, ya que permiten establecer
                 una comunicación efectiva con el veterinario
            </li>
        </ul>

    <h2>Tabla HistorialMedico</h2>
    <p>
        Compila toda la información relacionada con el tratamiento de un porcino, incluidos los gastos
         asociados. Esto es crucial para la gestión financiera de la atención médica y el seguimiento
         de la eficacia de los tratamientos.
    </p>

    <ul>
        <h3>
            Campos de la tabla
        </h3>
        <li>
            Id_HistorialMedico es esencial como identificador único para cada registro de historial médico,
            lo que permite un seguimiento claro y organizado de los tratamientos realizados.
        </li>
        <li>
            Tratamiento es crucial para documentar las intervenciones realizadas, lo que es fundamental
            para evaluar la eficacia de los tratamientos a lo largo del tiempo.
        </li>
        <li>
            PeriodoTratamiento permite registrar la duración del tratamiento, lo que es importante para el
            seguimiento de la salud del animal y el cumplimiento de los protocolos veterinarios.
        </li>
        <li>
            GastoConsulta y GastoMedicamento son vitales para la gestión financiera, ya que permiten calcular
             los costos asociados al tratamiento de cada porcino, ayudando a evaluar la rentabilidad y
             sostenibilidad del manejo sanitario.
        </li>
        <h3>Relación con la tabla Diagnosticos</h3>
        <li>
            Id_Diagnostico vincula cada historial médico a un diagnóstico específico, facilitando el acceso
            a la información sobre la salud del porcino y asegurando la coherencia en el tratamiento.
        </li>
    </ul>


    <h1>Funcionalidades de los Usuarios del subsistema</h1>

    <h2>Estructura de la Base de Datos</h2>
    <p>La base de datos ha sido diseñada con un enfoque en la normalización, lo que significa que cada tabla
        representa una entidad única y sus atributos. Esto facilita la gestión de datos y permite que
        los usuarios accedan a la información de forma estructurada y coherente.
    </p>
    <h2>
        Funcionalidades del Dueño
    </h2>
    <p>El Dueño podrá gestionar la información de los porcinos de manera eficiente:</p>
    <ol>
    <li>Registrar y actualizar información de porcinos:</li>
    <ul>
        <li>
            Al interactuar con la tabla Porcinos, el dueño puede agregar nuevos registros o modificar
            existentes. Esto se puede implementar mediante formularios en una interfaz gráfica que
            permita la entrada de datos de manera sencilla.
        </li>
        <li>
            Cada vez que se registra o actualiza un porcino, se asegura que la información esté
            disponible para otros usuarios, lo que facilita el seguimiento de la salud y el
            manejo del animal.
        </li>
    </ul>
    <li>
        Registrar vacunaciones:
    </li>
    <ul>
        <li>
            La interacción con la tabla Vacunas permitirá al dueño ingresar datos sobre las vacunas
            administradas. Esto no solo ayuda a mantener un control de salud, sino que también
            asegura que la información esté actualizada y disponible para el veterinario.
        </li>
    </ul>
    </ol>

    <h2>
        Funcionalidades del Médico Veterinario
    </h2>
    <p>El Médico Veterinario tendrá acceso a funcionalidades que le permitirán
        realizar diagnósticos y tratamientos de manera efectiva:
    </p>
    <ol>
    <li>Registrar diagnósticos:</li>
    <ul>
        <li>
            Al utilizar la tabla Diagnosticos, el veterinario puede ingresar información
            sobre la salud de cada porcino, lo que permite un seguimiento detallado de
            las enfermedades. Esto se puede implementar mediante formularios que requieran
            la entrada de datos específicos, como la enfermedad y la fecha del diagnóstico.
        </li>
        <li>
            Este registro es esencial para mantener un historial médico completo,
            lo que facilita la toma de decisiones en tratamientos futuros.
        </li>
    </ul>
    <li>
        Registrar tratamientos y gastos:
    </li>
    <ul>
        <li>
            La tabla HistorialMedico permitirá al veterinario documentar los tratamientos
            realizados, sus periodos y los costos asociados. Esto es crucial para la gestión
            financiera de la granja y para evaluar la eficacia de los tratamientos administrados.
        </li>
        <li>
            Un sistema de gestión puede generar reportes sobre estos tratamientos, ayudando en
            la planificación de recursos y en la evaluación del bienestar animal.

        </li>
    </ul>
    <li>
        Actualizar vacunaciones:
    </li>
    <ul>
        <li>
            El veterinario podrá modificar registros en la tabla Vacunas para reflejar cambios
            en el estado de vacunación de los porcinos. Esto asegura que todos los registros
            están actualizados y disponibles para futuros diagnósticos y tratamientos.
        </li>
    </ul>
    </ol>

    <h1>Separación de Responsabilidades por Tabla</h1>
    <li> Tabla Porcinos</li>
    <ol>
        <li>
            Dueño:
        </li>
        <ul>
            <li>
                Registrar nuevo porcino: Ingresar información sobre el porcino, incluyendo
                fecha de ingreso, peso, edad, raza, precio de compra y venta.
            </li>
            <li>
                Actualizar información de porcino: Modificar datos existentes, como fecha
                de egreso, fecha de deceso, peso y otros atributos relevantes.
            </li>
        </ul>
    </ol>

    <li>Tabla Vacunas</li>
    <ol>
        <li>
            Dueño:
        </li>
        <ul>
            <li>
                Registrar vacunación: Agregar registros de vacunas administradas a los
                porcinos, incluyendo nombre de la vacuna y fecha de vacunación.
            </li>
        </ul>
    <li>
        Médico Veterinario:
    </li>
        <ul>
            <li>
                Actualizar registro de vacunación: Modificar detalles de las vacunas 
                administradas, como la fecha o el nombre de la vacuna, si es necesario.
            </li>
        </ul>
    </ol>

    <li> Tabla Diagnosticos</li>
    <ol>
        <li>
            Médico Veterinario:
        </li>
        <ul>
            <li>
                Registrar un diagnóstico: Ingresar información sobre el diagnóstico de
                un porcino, incluyendo la enfermedad, fecha del diagnóstico y el
                veterinario responsable.
            </li>
            <li>
                Actualizar diagnóstico: Modificar información existente relacionada con
                diagnósticos previos, asegurando que la información esté actualizada.
            </li>
        </ul>
    </ol>

    <li>Tabla HistorialMedico</li>
    <ol>
        <li>
            Médico Veterinario:
        </li>
        <ul>
            <li>
                Registrar un tratamiento: Ingresar detalles sobre tratamientos realizados,
                incluyendo el tipo de tratamiento, duración, y gastos asociados (gasto de consulta y medicamento).
            </li>
            <li>
                Actualizar historial médico: Modificar registros de tratamientos anteriores,
                si se requiere ajustar información o costos.
            </li>
        </ul>
    </ol>

    <li>Tabla Veterinarios</li>
    <ol>
        <li>
            Dueño:
        </li>
        <ul>
            <li>
                Consultar información de veterinarios: Visualizar los registros de
                veterinarios para conocer quiénes están disponibles y sus datos de contacto.
            </li>
        </ul>
        <li>
            Médico Veterinario:
        </li>
        <ul>
            <li>
                Actualizar información personal: Modificar su propio registro, incluyendo
                nombre, teléfono y email, si tiene permisos para hacerlo.
            </li>
        </ul>
    </ol>


    <h1>Código SQL para construir las tablas con las llaves foraneas</h1>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .info-box {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
            overflow-x: auto;
        }
        h2 {
            margin-top: 0;
        }
        pre {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap; /* Mantiene el formato de los saltos de línea */
            word-wrap: break-word; /* Permite que las palabras largas se dividan */
        }
    </style>
</head>
<body>

<div class="info-box">
    <h2>Script SQL para la Base de Datos</h2>
    <pre>
-- Crear base de datos
CREATE DATABASE HMedico
USE HMedico

-- Crear tabla Veterinarios
CREATE TABLE Veterinarios (
    Id_Veterinario INT PRIMARY KEY IDENTITY(1,1),
    Nombre VARCHAR(100) NOT NULL,
    Telefono VARCHAR(15) NOT NULL,
    Email VARCHAR(100) NOT NULL
);

-- Crear tabla Porcinos
CREATE TABLE Porcinos (
    Id_Porcinos INT PRIMARY KEY IDENTITY(1,1),
    FechaIngreso DATETIME NOT NULL,
    FechaEgreso DATETIME NULL,
    FechaDeceso DATETIME NULL,
    Peso DECIMAL(10, 2) NOT NULL,
    Edad INT NOT NULL,
    Raza VARCHAR(50) NOT NULL,
    PrecioCompra DECIMAL(10, 2) NOT NULL,
    PrecioVenta DECIMAL(10, 2) NOT NULL
);

-- Crear tabla Diagnosticos
CREATE TABLE Diagnosticos (
    Id_Diagnostico INT PRIMARY KEY IDENTITY(1,1),
    Id_Porcinos INT NOT NULL,
    Id_Veterinario INT NOT NULL,
    Enfermedad VARCHAR(100) NOT NULL,
    FechaDiagnostico DATETIME NOT NULL,
    FOREIGN KEY (Id_Porcinos) REFERENCES Porcinos(Id_Porcinos),
    FOREIGN KEY (Id_Veterinario) REFERENCES Veterinarios(Id_Veterinario)
);

-- Crear tabla HistorialMedico
CREATE TABLE HistorialMedico (
    Id_HistorialMedico INT PRIMARY KEY IDENTITY(1,1),
    Id_Diagnostico INT NOT NULL,
    Tratamiento VARCHAR(100) NOT NULL,
    PeriodoTratamiento INT NOT NULL,
    GastoConsulta DECIMAL(10, 2) NOT NULL,
    GastoMedicamento DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (Id_Diagnostico) REFERENCES Diagnosticos(Id_Diagnostico)
);

-- Crear tabla Vacunas
CREATE TABLE Vacunas (
    Id_Vacunas INT PRIMARY KEY IDENTITY(1,1),
    Id_Porcinos INT NOT NULL,
    NombreVacuna VARCHAR(100) NOT NULL,
    FechaVacunacion DATETIME NOT NULL,
    FOREIGN KEY (Id_Porcinos) REFERENCES Porcinos(Id_Porcinos)
);
    </pre>
</div>

</body>
    <h1>Registros en las Tablas de la Base de Datos</h1>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .info-box {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
            overflow-x: auto;
        }
        h2 {
            margin-top: 0;
        }
        pre {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap; /* Mantiene el formato de los saltos de línea */
            word-wrap: break-word; /* Permite que las palabras largas se dividan */
        }
    </style>
</head>
<body>

<div class="info-box">
    <h2>Script SQL para Inserción de Registros en la base de datos</h2>
    <pre>
--REGISTROS
-- Insertar registros en Veterinarios
INSERT INTO Veterinarios (Nombre, Telefono, Email) VALUES
('Dr. Juan Pérez', '555-0101', 'juan.perez@example.com'),
('Dra. Ana Gómez', '555-0102', 'ana.gomez@example.com'),
('Dr. Luis Martínez', '555-0103', 'luis.martinez@example.com');

-- Insertar registros en Porcinos
INSERT INTO Porcinos (FechaIngreso, FechaEgreso, FechaDeceso, Peso, Edad, Raza, PrecioCompra, PrecioVenta) VALUES
('2023-01-01', NULL, NULL, 100.50, 6, 'Yorkshire', 200.00, 300.00),
('2023-01-05', NULL, NULL, 95.00, 5, 'Berkshire', 190.00, 280.00),
('2023-01-10', NULL, NULL, 110.00, 7, 'Duroc', 210.00, 310.00);

-- Insertar registros en Diagnosticos
INSERT INTO Diagnosticos (Id_Porcinos, Id_Veterinario, Enfermedad, FechaDiagnostico) VALUES
(1, 1, 'Infección Respiratoria', '15-01-2023'),
(2, 2, 'Parásitos', '21-01-2023'),
(3, 3, 'Fiebre Porcina', '25-01-2023');

-- Insertar registros en HistorialMedico
INSERT INTO HistorialMedico (Id_Diagnostico, Tratamiento, PeriodoTratamiento, GastoConsulta, GastoMedicamento) VALUES
(1, 'Antibióticos', 7, 50.00, 20.00),
(2, 'Desparasitante', 14, 30.00, 15.00),
(3, 'Vacunación', 3, 40.00, 10.00);

-- Insertar registros en Vacunas
INSERT INTO Vacunas (Id_Porcinos, NombreVacuna, FechaVacunacion) VALUES
(1, 'Vacuna A', '18-01-2023'),
(2, 'Vacuna B', '22-01-2023'),
(3, 'Vacuna C', '28-01-2023');
    </pre>
</div>

</body>
</html>